# Production Environment Variables for Testcraftworld
# Copy this file to .env and fill in your values

############################################################
# Database Configuration
#
# Option A (Recommended): Coolify-managed MySQL (internal)
# - Create a MySQL database in Coolify.
# - Use the INTERNAL hostname shown by Coolify (accessible within the same stack/network).
# - SSL is typically not used for internal connections; disable with ssl-mode=DISABLED.
#
# Example (replace placeholders with your actual values from Coolify):
#   mysql://<user>:<password>@<internal-hostname>:3306/<database>?ssl-mode=DISABLED
#
# Notes:
# - <internal-hostname> is often the service/container name that Coolify shows for internal connections.
# - Keep this app and the DB on the same Coolify network/stack so the hostname resolves.
# - If you temporarily need the app to boot while DB is unreachable, you can set
#   DATABASE_FALLBACK_TO_MEMORY=true below (not recommended long-term).
DATABASE_URL=mysql://<user>:<password>@<internal-hostname>:3306/<database>?ssl-mode=DISABLED
# If and only if you connect to an external DB with self-signed certs, set to true to bypass cert validation
DATABASE_SSL_BYPASS=false

# Allow app to start with in-memory storage if DB is unreachable (use carefully)
# Set to true only temporarily as a workaround; turn off once DB connectivity works.
DATABASE_FALLBACK_TO_MEMORY=false

# Server Configuration
PORT=8000
NODE_ENV=production

# Admin token for API access (generate a secure random string)
ADMIN_TOKEN=your_secure_admin_token_here

# Test User Credentials
# Official Website Admin Account
TEST_ADMIN_USERNAME=testcraftworld
TEST_ADMIN_PASSWORD=Testcraft@123
TEST_ADMIN_EMAIL=blogs_admin@testcraft.in

# Official Website Author Account
TEST_AUTHOR_USERNAME=author
TEST_AUTHOR_PASSWORD=Testcraft@123
TEST_AUTHOR_EMAIL=testcraftworld@testcraft.in

## Optional: remove if not using Postgres
# POSTGRES_PASSWORD=

# Optional: Session Configuration
# IMPORTANT: Do NOT commit real production secrets to version control.
# Replace the value below with a securely generated string and store the
# real secret in your deployment platform's secret store (Coolify, etc.).
SESSION_SECRET=your_production_session_secret_here
# Optional: Email Configuration (if you add email features)
# SMTP_HOST=
# SMTP_PORT=
# SMTP_USER=
# SMTP_PASS=

# AI Configuration
# Get your API key from https://makersuite.google.com/app/apikey
# Google Gemini (Generative AI) API key / client credentials
#
# To enable live Gemini content generation, set GEMINI_API_KEY to a valid API key or
# service account credentials recognized by Google's Generative Language API. Without
# valid credentials the SDK will return 403 (unregistered callers) and the app will
# fall back to the mock generator.
#
# Example:
# GEMINI_API_KEY=ya29.A0ARrdaM-...     # short API key form
# or set a JSON service account file path and use GOOGLE_APPLICATION_CREDENTIALS env instead
GEMINI_API_KEY=your_gemini_api_key_here

# Optional: specific Gemini model to use (defaults to gemini-2.5-pro)
# Example: GEMINI_MODEL=gemini-2.5-pro
GEMINI_MODEL=gemini-2.5-pro

# Unsplash API (optional) — when provided the app will use the official Unsplash
# Search API and cache downloaded images locally. If not provided the worker
# falls back to https://source.unsplash.com/featured/?<query> which does not
# require an API key.
# Get an access key from https://unsplash.com/developers
UNSPLASH_ACCESS_KEY=your_unsplash_access_key_here

# News API key (optional) — used by the AI agent to fetch trending news topics
# if you have an API provider configured (optional)
NEWS_API_KEY=

# Agent controls
# If AGENT_USE_MOCK_GENERATOR=true the AI agent will use a deterministic mock
# generator instead of calling Gemini. Useful for development without API keys.
AGENT_USE_MOCK_GENERATOR=false
# If true the agent processor will publish immediately when auto-publish rules match
AGENT_PUBLISH_IMMEDIATE=false

# Email provider (Resend) for sending blog emails (optional)
# RESEND_API_KEY and RESEND_FROM_ADDRESS are optional; leave blank if you don't use email
RESEND_API_KEY=your_resend_api_key_here
RESEND_FROM_ADDRESS=blogs@testcraft.in

# Optional: Sentry DSN for error reporting (optional)
SENTRY_DSN=


############################################################
# Alternative: External MySQL (public)
# If you prefer an external/public MySQL, use this format and ensure firewall/allowlist permits Coolify to reach it.
# Example:
# DATABASE_URL=mysql://<user>:<password>@<public-host>:<port>/<database>?ssl-mode=REQUIRED
# For public DBs with custom/self-signed certs, you may need:
# DATABASE_SSL_BYPASS=true